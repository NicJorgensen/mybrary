webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},s,!1,function(t){n("gLcT")},null,null).exports,i=n("/ocq"),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar"},[n("h1",{staticClass:"title"},[t._v("My•brary")]),t._v(" "),n("div",{staticClass:"navRight"},[t.user.name?t._e():n("div",[n("button",{staticClass:"btn btn-light",on:{click:t.goToLogin}},[t._v("Login / Create Account")])]),t._v(" "),t.user.name?n("div",[n("button",{staticClass:"btn btn-light"},[t._v("Add a Book")]),t._v(" "),n("button",{staticClass:"btn btn-light"},[t._v("Profile")]),t._v(" "),n("button",{staticClass:"btn btn-light",on:{click:function(e){t.logout(t.user)}}},[t._v("Logout")])]):t._e()])])},staticRenderFns:[]};var c={name:"Home",data:function(){return{}},mounted:function(){this.$store.dispatch("getBooks")},computed:{books:function(){return this.$store.state.books}},components:{Navbar:n("VU/8")({name:"Navbar",data:function(){return{}},mounted:function(){this.$store.dispatch("authCheck")},methods:{logout:function(t){this.$store.dispatch("logout",t)},goToLogin:function(){this.$store.dispatch("goToLogin")}},computed:{user:function(){return this.$store.state.user}}},r,!1,function(t){n("oTpL")},"data-v-1befd5b6",null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("Navbar"),this._v(" "),this._l(this.books,function(t){return e("div")})],2)},staticRenderFns:[]};var l=n("VU/8")(c,u,!1,function(t){n("iCSw")},"data-v-1c6f70e5",null).exports,m=n("woOf"),d=n.n(m),p={name:"Login",data:function(){return{showLogin:!0,user:{email:"",password:""},newUser:{name:"",email:"",password:"",confirmPassword:""}}},mounted:function(){this.$store.dispatch("authenticate")},methods:{login:function(){this.$store.dispatch("login",this.user),this.resetFields()},createUser:function(){if(this.newUser.password!==this.newUser.confirmPassword)return this.resetFields(),alert("Passwords do not match!"),this.showLogin=!1;this.$store.dispatch("createUser",this.newUser),this.resetFields()},resetFields:function(){d()(this.$data,this.$options.data.call(this))}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg"},[n("div",{staticClass:"login col-sm-8"},[n("h1",[t._v("Welcome to My•brary")]),t._v(" "),1==t.showLogin?n("form",{staticClass:"form-group",on:{submit:function(e){e.preventDefault(),t.login()}}},[n("h2",[t._v("LOGIN")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn submit",attrs:{type:"submit"}},[t._v("Submit")])]):t._e(),t._v(" "),0==t.showLogin?n("form",{staticClass:"form-group",on:{submit:function(e){e.preventDefault(),t.createUser()}}},[n("h2",[t._v("CREATE ACCOUNT")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.name,expression:"newUser.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.newUser.name},on:{input:function(e){e.target.composing||t.$set(t.newUser,"name",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.email,expression:"newUser.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.newUser.email},on:{input:function(e){e.target.composing||t.$set(t.newUser,"email",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.password,expression:"newUser.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.newUser.password},on:{input:function(e){e.target.composing||t.$set(t.newUser,"password",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.confirmPassword,expression:"newUser.confirmPassword"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Confirm Password"},domProps:{value:t.newUser.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.newUser,"confirmPassword",e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn submit",attrs:{type:"submit"},on:{click:function(e){t.showLogin=!0}}},[t._v("Submit")])]):t._e(),t._v(" "),n("div",{staticClass:"d-flex justify-content-center"},[n("div",{staticClass:"bg-1"},[n("button",{staticClass:"btn btn-link",on:{click:function(e){t.showLogin=!1}}},[t._v("Create User")]),t._v(" "),n("button",{staticClass:"btn btn-link",on:{click:function(e){t.showLogin=!0}}},[t._v("Login")])])])])])},staticRenderFns:[]};var v=n("VU/8")(p,h,!1,function(t){n("SAPU")},"data-v-8e8c340a",null).exports,f={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var g=n("VU/8")({name:"Profile",data:function(){return{}}},f,!1,function(t){n("tLnt")},"data-v-18819e66",null).exports;o.a.use(i.a);var w=new i.a({routes:[{path:"/",name:"Home",component:l},{path:"/login",name:"Login",component:v},{path:"/profile",name:"Profile",component:g}]}),b=n("NYxO"),_=n("mtWM"),U=n.n(_),C=!window.location.host.includes("localhost")?"":"//localhost:5000/",L=U.a.create({baseURL:C+"account/",timeout:5e3,withCredentials:!0}),P=U.a.create({baseURL:C+"api/",timeout:5e3,withCredentials:!0});o.a.use(b.a);var k=new b.a.Store({state:{user:{},books:[]},mutations:{setUser:function(t,e){t.user=e},logout:function(t,e){t.user={}},setBooks:function(t,e){t.books=e}},actions:{authenticate:function(t){var e=t.commit;t.dispatch;L.get("authenticate").then(function(t){e("setUser",t.data),w.push({name:"Home"})}).catch(function(t){w.push({name:"Login"})})},authCheck:function(t){var e=t.commit;t.dispatch;L.get("authenticate").then(function(t){e("setUser",t.data)}).catch(function(t){console.log()})},createUser:function(t,e){t.commit,t.dispatch;L.post("register",e).then(function(t){console.log("Push it!"),w.push({name:"Home"})}).catch(function(t){console.log("Invalid username or password"),w.push({name:"Login"})})},goToLogin:function(t){t.commit,t.dispatch;w.push({name:"Login"})},login:function(t,e){var n=t.commit;t.dispatch;L.post("login",e).then(function(t){n("setUser",{}),w.push({name:"Home"})}).catch(function(t){console.log("Invalid Username or Password"),w.push({name:"Login"})})},logout:function(t,e){var n=t.commit;t.dispatch;L.delete("logout",e).then(function(t){n("logout",e),w.push({name:"Home"})}).catch(function(t){console.log("Error logging out.")})},getBooks:function(t){var e=t.commit;t.dispatch;P.get("books").then(function(t){e("setBooks",t.data)}).catch(function(t){console.log("Unable to Retrieve Books.")})}}});o.a.config.productionTip=!1,new o.a({el:"#app",router:w,store:k,components:{App:a},template:"<App/>"})},SAPU:function(t,e){},gLcT:function(t,e){},iCSw:function(t,e){},oTpL:function(t,e){},tLnt:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.aa4492571ad089ac7a79.js.map